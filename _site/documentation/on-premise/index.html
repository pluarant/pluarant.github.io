<!-- Page generated 2019-09-28 10:55:39 +0530 -->
<!-- relative link basehrefs -->

	
	
	
		
			
		
	
		
			
			


<!-- Logic for 'edit this button' -->


	

	

	

	

	

	

	

	

	

			
<!-- edit url temporarily disabled Mesibo -->


<!-- End of logic for 'edit this button' -->


<!DOCTYPE html>
<html lang="en">

<head>
	<base href="/documentation/" />
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<style type="text/css">
		@charset "UTF-8";
		[ng\:cloak],
		[ng-cloak],
		[data-ng-cloak],
		[x-ng-cloak],
		.ng-cloak,
		.x-ng-cloak,
		.ng-hide:not(.ng-hide-animate) {
			display: none !important;
		}

		ng\:form {
			display: block;
		}
	</style>
	
	<!-- favicon -->
	<link rel="icon" type="image/png" href="/favicons/mesibo-favicon.png" sizes="129x128">
	<meta name="msapplication-TileImage" content="/favicons/mesibo-favicon.png">
	<link rel="mesibo-favicon" type="image/png" href="/favicons/mesibo-favicon.png" sizes="129x128">
	<meta property="og:image" content="/favicons/mesibo-favicon.png"/>
	<!-- metadata -->
	<meta property="og:type" content="website"/>
	<meta property="og:updated_time" itemprop="dateUpdated" content="2019-09-28T10:55:39+05:30"/>
	<meta property="og:image" itemprop="image primaryImageOfPage" content="/images/docs@2x.png"/>
	<meta name="twitter:card" content="summary"/>
	<meta name="twitter:domain" content="mesibo.com"/>
	<meta name="twitter:site" content="@mesibo"/>
	<meta name="twitter:url" content="https://twitter.com/mesiboapi"/>
	<meta name="twitter:title" itemprop="title name" content="Installing & Running Mesibo On-Premise Platform"/>
	<meta name="twitter:description" property="og:description" itemprop="description" content="Mesibo On-Premise solution allows you to run the entire Mesibo platform in your own premise OR private cloud. All the messages and calls go through your own data center and..." />
	<meta name="twitter:image:src" content="/images/docs@2x.png" />
	<meta name="twitter:image:alt" content="Mesibo Documentation"/>
	<meta property="article:published_time" itemprop="datePublished" content="2019-09-28T10:55:39+05:30"/>

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="keywords" content="open, source, on-premise, messaging, chat, voice, video">
	<link rel="stylesheet" href="/css/font-awesome.min.css" >
	<link rel="stylesheet" href="/css/bootstrap.min.css" >
	<link id="pygments" rel="stylesheet" href="/css/pygments/perldoc.css" >
	<link id="pagestyle" rel="stylesheet" href="/css/style.css" >

	<!-- Go get "Open Sans" font from Google -->
	<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
	<!-- SEO stuff -->
	<title>Installing & Running Mesibo On-Premise Platform | Mesibo Documentation</title>
<meta property="og:title" content="Installing & Running Mesibo On-Premise Platform" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Installing & Running Mesibo On-Premise Platform" />
<meta property="og:description" content="Installing & Running Mesibo On-Premise Platform" />
<link rel="canonical" href="/documentation/on-premise/" />
<meta property="og:url" content="/documentation/on-premise/" />
<meta property="og:site_name" content="Mesibo Documentation" />
<script type="application/ld+json">
{"@context":"http://schema.org","@type":"WebPage","headline":"Installing & Running Mesibo On-Premise Platform","description":"Installing & Running Mesibo On-Premise Platform","url":"https://docs.docker.com/documentation/on-premise/"}</script>
	<!-- END SEO STUFF -->
	
	<script language="javascript">
	// Default to assuming this is an archive and hiding some stuff
	// See js/archive.js and js/docs.js for logic relating to this
	var isArchive = true;
	var dockerVersion = 'v18.09';
	</script>
	<!-- Google Analytic Code -->
	<script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	  
		ga('create', 'UA-97488698-1', 'auto');
		ga('send', 'pageview');
	</script>
	<!-- End Google Analytic Code --> 	<!-- Facebook Pixel Code -->
		<script>
		!function(f,b,e,v,n,t,s)
		{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
		n.callMethod.apply(n,arguments):n.queue.push(arguments)};
		if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
		n.queue=[];t=b.createElement(e);t.async=!0;
		t.src=v;s=b.getElementsByTagName(e)[0];
		s.parentNode.insertBefore(t,s)}(window,document,'script',
		'https://connect.facebook.net/en_US/fbevents.js');
		 fbq('init', '559862854355634'); 
		fbq('track', 'PageView');
		</script>
		<noscript>
		 <img height="1" width="1" 
		src="https://www.facebook.com/tr?id=559862854355634&ev=PageView
		&noscript=1"/>
		</noscript>
	<!-- End Facebook Pixel Code -->
	<!-- Place this tag in your head or just before your close body tag. -->
<script async defer src="https://buttons.github.io/buttons.js"></script>
</head>
<body ng-app="Docker" ng-controller="DockerController" class="colums">
	<header>
		 <nav class="nav-secondary navbar navbar-fixed-top">
    <!-- <div class="fan"></div> -->
    <div class="container-fluid">
        <div class="navbar-header">
            <a href="/"><img class="logo" src="/images/mesibo-logo-white.png" alt="Mesibo Docs" title="Mesibo Docs"></a>
        </div>
        <div class="navbar-collapse" aria-expanded="false" style="height: 1px;">
            <div class="search-form" id="search-div" style="visibility: hidden">
    <form class="search-form form-inline ng-pristine ng-valid" id="searchForm" action="/search/">
        <input class="search-field form-control ds-input" id="st-search-input" value="" name="q" placeholder="Search the docs" type="search" autocomplete="off" spellcheck="false" dir="auto" style="position: relative; vertical-align: top;">
        <div id="autocompleteContainer">
            <div id="autocompleteResults"></div>
        </div>
        <!-- <button type="submit" class="search-submit btn btn-default">Search</button> -->
    </form>
</div>
<div class="sidebar-toggle">
    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
    </button>
</div>
<div class="nav-container">
    <div id="tabs">
        <ul class="tabs" id="jsTOCHorizontal">

        </ul>
    </div>
    <!-- Yusuf
    <div class="ctrl-right hidden-xs hidden-sm">
        <a href="javascript:void(0)" id="menu-toggle"><i class="fa fa-indent" aria-hidden="true"></i></a>
        <div class="btn-group" style="visibility: hidden">
  <button type="button" class="btn btn-default dropdown-btn dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Mesibo latest (current)   <span class="caret"></span>
  </button>
  <ul class="dropdown-menu">
    <li><a href="/v1.0.0/">Mesibo v1.0.0</a></li>
  </ul>
</div>

    </div>
    -->
</div>

        </div>
    </div>
</nav>

	</header>

	<div class="wrapper right-open">
		<div class="container-fluid">
			<div class="row">
				<div class="col-body">
					<main class="col-content content">
						<section class="section">
							
							
							<h1>Installing & Running Mesibo On-Premise Platform</h1>
							 

							 <span class="reading-time" title="Estimated reading time">
  <span class="reading-time-label">Estimated reading time: </span>
  
  
    16 minutes
  
</span>

							
							
							<p>Mesibo On-Premise solution allows you to run the entire Mesibo platform in your own premise OR private cloud. All the messages and calls go through your own data center and stay in your own database. All you have to do is download Mesibo On-Premise and run it in your own data center. That’s it!</p>

<h3 id="why-on-premise">Why On-Premise</h3>
<p>Although our cloud services let you start immediately, there are several reasons why you need On-Premise, and one of the key reasons is to have ultimate control over your data. More than ever before, it has become imperative to protect your data and be more sensitive towards your user data, be it personal data, financial data, medical records, GDPR, HIPPA, unauthorized harvesting of your data, companies selling, misusing your data for advertisement, to name a few. Cambridge Analytica Scandal is an example that your data is most safe when it’s within your control end-to-end.</p>

<p>Mesibo On-premise offering puts you complete control of your data since everything runs on your own servers.</p>

<h3 id="technical-advantages">Technical Advantages</h3>
<p>On the technical side, On-Premise offers many features which are not possible with the cloud deployment. For example, loadable modules that let you load your own code and enable tighter integration with your backend. You can interface Mesibo On-premise solution with machine learning and AI tools like Tensorflow, Matlab, and much more. Refer tutorials for more details.</p>

<h3 id="pricing">Pricing</h3>
<p>Pricing is the most salient part of our On-premise offering. It comes to you at no additional cost - you only pay for the number of active users per month! No monthly commitment, no bandwidth charges, no storage charges, or any other hidden charges. This makes On-premise even more economical and attractive than our Cloud offering.</p>

<blockquote>
  <p>If you do not wish to host Mesibo on your own server infrastructure, you have the option of using the Cloud offering by Mesibo. Also, <strong>even when running On-Premise</strong>, you can always use Mesibo cloud as a <strong>back-up</strong>, gives you best of the both worlds.</p>
</blockquote>

<h3 id="features">Features</h3>
<ul>
  <li>All Mesibo features, including Messaging, Voice, and Video calling running from your own premise</li>
  <li>Complete control over your data. All the messages and calls route through and stay in your own infrastructure</li>
  <li>Unlimited bandwidth and Messages</li>
  <li>Unlimited storage and data retention</li>
  <li>Private and public deployment</li>
  <li>Auto fallback to Mesibo cloud as a back-up, if required</li>
  <li>Push notifications</li>
  <li>Loadable modules and scripting</li>
</ul>

<p>All these at no additional cost</p>

<h3 id="prerequisites">Prerequisites</h3>
<p>Before we dive into installing and running Mesibo On-Premise Platform on your server, ensure that you are:</p>

<ul>
  <li>
    <p>Familiar with Mesibo API and are already using Mesibo on our cloud services. If not, please refer to <a href="/documentation/get-started/">getting started</a> guide and tutorials to familiarize yourself before setting up Mesibo On-Premise.</p>
  </li>
  <li>
    <p>Familiar with setting up a Linux server and MySQL database. If not, refer to online tutorials for the Linux distribution of your choice.</p>
  </li>
  <li>
    <p>Although not essential, basic knowledge of setting up Docker and using Docker containers would be helpful. You can refer to <a href="https://docs.docker.com">Docker documentation</a> and various online tutorials on Docker.</p>
  </li>
</ul>

<h3 id="requirements">Requirements</h3>
<p>Mesibo On-Premise Platform requires the following:</p>

<ul>
  <li>
    <p>Linux 64-bit server (or an instance) with at least 1GB free RAM. Mesibo supports all the major Linux distributions, including:</p>

    <ul>
      <li>
        <p>RHEL or CentOS 7.x</p>
      </li>
      <li>
        <p>Ubuntu 16.x or 18.x</p>
      </li>
      <li>
        <p>Fedora 28 or 29</p>
      </li>
      <li>
        <p>Debian 9 or 10</p>
      </li>
      <li>
        <p>SLES 15</p>
      </li>
      <li>
        <p>Oracles Linux 7.x</p>
      </li>
    </ul>
  </li>
  <li>
    <p>MySQL (or MariaDB) database 5.x and later</p>
  </li>
</ul>

<h3 id="should-i-recompile-my-apps-to-work-with-mesibo-on-premise">Should I recompile my apps to work with Mesibo On-Premise?</h3>
<p>Definitely not. If your apps are using latest Mesibo APIs, you only need to configure your On-Premise server in <a href="/console">Mesibo Console</a> and tell Mesibo to redirect all your users to your own server. All your users will immediately stop using Mesibo cloud servers and start using your own servers. Rest everything remains the same.</p>

<p>Mesibo cloud servers use the same software as On-Premise. So whether you use Mesibo Cloud Service or setup a dedicated server running Mesibo On-Premise, there is absolutely no change in the way you use Mesibo APIs or deploy your application. In fact, in case your data-center has issues, you can always have the option of falling back to Mesibo Cloud Services, with just the click of a button.</p>

<h2 id="setting-up-mesibo-on-premise">Setting up Mesibo-On Premise</h2>
<p>Although Mesibo is a highly sophisticated piece of software, we have ensured that it is straightforward to set up. You only need to provide bare minimum information regarding how your users will connect to your On-Premise server (<strong>your hostname</strong>) and where the On-Premise platform should save the data (<strong>your database</strong>),  Mesibo will take care of the rest.</p>

<p>To setup Mesibo On-Premise, follow the steps below:</p>

<h3 id="step-1---install-docker">Step 1 - Install Docker</h3>
<p>Mesibo On-Premise server is distributed as a docker image so that you can easily install it on most Linux distributions. All you need is to install Docker to run it. If you have already installed and running Docker on your server, you can skip to Step 2.</p>

<p>You can install Docker by running the command below:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sudo curl -sSL https://get.docker.com/ | sh
</code></pre></div></div>

<p>Once Docker is installed, you need to start the Docker daemon. Most Linux distributions use <code class="highlighter-rouge">systemctl</code> to start services. If you do not have <code class="highlighter-rouge">systemctl</code>, use the <code class="highlighter-rouge">service</code> command.</p>

<ul>
  <li>
    <p><strong><code class="highlighter-rouge">systemctl</code></strong>:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sudo systemctl start docker
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong><code class="highlighter-rouge">service</code></strong>:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sudo service docker start
</code></pre></div>    </div>
  </li>
</ul>

<p>Once the installation is over, you can verify it by running</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sudo docker run hello-world
</code></pre></div></div>

<p>It should show something like:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Hello from Docker!
This message shows that your installation appears to be working correctly.

</code></pre></div></div>

<h3 id="step-2---download-mesibo-on-premise-platform">Step 2 - Download Mesibo On-Premise Platform</h3>
<p>Download Mesibo On-Premise docker image by running the following command</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sudo docker pull mesibo/mesibo
</code></pre></div></div>

<p>This will download and install Mesibo On-Premise platform on your server. However, before we launch it, we need to configure mesibo in the <a href="/console">Mesibo console</a>.</p>

<h3 id="step-3---configure-mesibo-on-premise">Step 3 - Configure Mesibo On-Premise</h3>

<p>As mentioned earlier, Mesibo made On-Premise configuration straightforward. You don’t need to wrestle with complicated configuration files. Instead, the complete On-Premise configuration is done through <a href="/console/">Mesibo Console</a>. All you need to do is to pass your app token to Mesibo On-Premise server, and it will automatically fetch and configure the entire server for you.</p>

<p>Login to Mesibo console, and select the application you want to configure on your On-Premise host. <strong>Make a note of the app token</strong>. You need to use this app token later to run Mesibo On-Premise Server.</p>

<p><img src="/images/on-premise/app-token.jpg" alt="App token Mesibo Console" /></p>

<p>Now, Go to <code class="highlighter-rouge">App Settings →  On-Premise Hosting</code> in Mesibo Console. Here you will find two sections: <code class="highlighter-rouge">Enable On-Premise</code> and <code class="highlighter-rouge">On-Premise Configuration</code>.  Enter all the required configuration for your On-Premise setup in the configuration section.</p>

<blockquote>
  <p>Warning: <strong>DO NOT turn ON</strong> the <code class="highlighter-rouge">Enable On-Premise</code> switch before configuring and running Mesibo On-Premise.</p>
</blockquote>

<p><img src="/images/on-premise/on-premise-settings.jpg" alt="Console Screenshot" /></p>

<p>Following are the configuration entities:</p>

<ul>
  <li>
    <p>Your Hostname - All your users will connect to this hostname and hence ensure that it is correct.</p>
  </li>
  <li>
    <p>Database Information - You will need a database for Mesibo, and a user who has all privileges for accessing and modifying it. Mesibo requires this information (database host, name, username and password) to access the database.</p>
  </li>
</ul>

<p><img src="/images/on-premise/config-not-running.jpg" alt="Config Complete" /></p>

<p>There are two more configuration checkboxes which you can enable if required:</p>

<ul>
  <li>
    <p><strong>Privately Hosted</strong> - In this mode, mesibo console will not check for the correctness of hostname, or any network connectivity. Select this if you are running Mesibo On-Premise in your private network/intranet setup.</p>
  </li>
  <li>
    <p><strong>Auto Fallback</strong> - Enable this if you want to fallback to cloud when your data-center is having an issue. Note that, some of the offline messages will not be delivered in fallback mode since Mesibo cloud has no access to your database.</p>
  </li>
</ul>

<h3 id="configuring-tls-certificate">Configuring TLS Certificate</h3>
<p>Mesibo uses the latest Transport Layer Security (TLS) which is the successor to SSL. To enable TLS, you need to configure a valid TLS certificate with your Mesibo On-Premise installation.</p>

<blockquote>
  <p>Although Mesibo can automatically generate a self-signed certificate for you, it is recommended that you configure a valid CA-signed certificate. This is especially required for JavaScript code since all the major web browsers will throw a warning when using a self-signed certificate.</p>
</blockquote>

<p>You can use any existing certificate which you are using with your web server, OR purchase it from any provider of your choice, OR use <a href="https://letsencrypt.org/">Letsencrypt</a> which is a free service (recommended) to get a secure certificate.</p>

<p>To configure TLS/SSL certificate, you only need to provide the folder path containing your certificate (cert.pem), key (privkey.pem) and CA chain (chain.pem) files. For example,</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ls /etc/letsencrypt/live/mesibo.example.com/
README  cert.pem  chain.pem  fullchain.pem  privkey.pem

</code></pre></div></div>

<blockquote>
  <p>Note that wild card certificate is not recommended.</p>
</blockquote>

<h3 id="step-4---run-mesibo">Step 4 - Run Mesibo</h3>

<p>We are now all set to run Mesibo. You will notice that the Running Status field in console showing “Not Running”.</p>

<p>You can now run Mesibo using following command:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>docker run <span class="nt">-v</span> /certs:/etc/letsencrypt/live/mesibo.example.com <span class="nt">-p</span> 5222:5222 <span class="nt">-p</span> 5228:5228 <span class="se">\</span>
		<span class="nt">-p</span> 80:80 <span class="nt">-p</span> 443:443 <span class="nt">-p</span> 4443:4443 <span class="nt">-p</span> 5443:5443 <span class="nt">-p</span> 513:513 <span class="nt">-d</span> mesibo/mesibo <span class="se">\</span>
	       	&lt;APP_TOKEN&gt;
</code></pre></div></div>

<p>You need to specify the APP_TOKEN which you noted in Step-3 above. For example,</p>

<p><img src="/images/on-premise/token.jpg" alt="App token Mesibo Console" /></p>

<p>For example,</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sudo docker run -v /certs:/etc/letsencrypt/live/mesibo.example.com -p 5222:5222 -p 5228:5228 \
		-p 80:80 -p 443:443 -p 4443:4443 -p 5443:5443 -p 513:513 -d mesibo/mesibo  \
		iqmr059ms2yopxhc2sayx05ba2l5cralockbicqjsvv1nsqxs0x1yclfv0qvyg1q 
</code></pre></div></div>

<p>On sucessfull launch of Mesibo, the output log should look like below:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>E3108-082633-480 (1): Mesibo Build: Aug 29 2019 15:39:08
E3108-082633-506 (1): PID: 1
E3108-082633-775 (1): Local IP Address: 172.17.0.2
E3108-082634-580 (10): *** onp_message: On-Premise not enabled - login to Mesibo console to enable it
E3108-082634-639 (10): Generating TLS certificate for 192.168.0.107
I3108-082635-167: Starting mesibo

</code></pre></div></div>

<p>You can view logs using</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sudo docker logs &lt;CONTAINER_ID&gt;
</code></pre></div></div>

<p>You can find the CONTAINER_ID using <code class="highlighter-rouge">docker ps</code> command as shown below:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sudo docker ps
</code></pre></div></div>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                                                                                                                                                            NAMES
4fd84018a651        mesibo/mesibo       "/usr/bin/mesibo_onp…"   56 minutes ago      Up 56 minutes       0.0.0.0:80-&gt;80/tcp, 0.0.0.0:443-&gt;443/tcp, 0.0.0.0:513-&gt;513/tcp, 0.0.0.0:4443-&gt;4443/tcp, 0.0.0.0:5222-&gt;5222/tcp, 0.0.0.0:5228-&gt;5228/tcp, 0.0.0.0:5443-&gt;5443/tcp   modest_mendeleev

</code></pre></div></div>

<p>If your logs contain any errors indicating failure to start Mesibo, refer to the troubleshooting section.</p>

<p>Now, check <code class="highlighter-rouge">Running status</code> of your server from the ‘Mesibo console → App Settings → On-Premise Hosting<code class="highlighter-rouge">. If successful, the </code>Running Status<code class="highlighter-rouge"> field will contain your hostname instead of </code>Not running`.</p>

<p><img src="/images/on-premise/config-running.jpg" alt="Enable On-Premise screenshot" /></p>

<p>If your On-Premise server is setup properly continue with the next step, else refer to the troubleshooting section.</p>

<h3 id="step-5---enable-on-premise">Step 5 - Enable On-Premise</h3>
<p>Now, it’s time to enable On-Premise from the console. Once you enable On-Premise from the console, all your users will be notified to use your On-Premise server instead of Mesibo cloud.</p>

<p><img src="/images/on-premise/enable-on.jpg" alt="Enable On-Premise screenshot" /></p>

<p>Turn on the On-Premise switch and your app users will start connecting to your On-Premise server immediately and you will start observing logs like following:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>: login successful: root (uid xxxx) aid: (xxxx) 

</code></pre></div></div>

<p>Congratulations! You are now UP with Mesibo running on your own premise.</p>

<h3 id="firewall-settings">Firewall Settings</h3>
<p>Mesibo listens on TCP ports <code class="highlighter-rouge">80</code>, <code class="highlighter-rouge">443</code>, <code class="highlighter-rouge">513</code>, <code class="highlighter-rouge">5222</code>, <code class="highlighter-rouge">5228</code>, <code class="highlighter-rouge">4443</code>, and <code class="highlighter-rouge">5443</code>. Ensure that these ports are open on your Linux host so that your users can connect to your On-Premise server.</p>

<p>Depending on your Linux distribution, there are different ways to configure firewall, for example, to open port `5222’, you’d issue the following command depending on your system:</p>

<ul>
  <li>
    <p>If your system has <strong><code class="highlighter-rouge">firewall-cmd</code></strong> (Red Hat Enterprise Linux, CentOS, Fedora, and variants)</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sudo firewall-cmd --add-port 5222/tcp
</code></pre></div>    </div>
  </li>
  <li>
    <p>If your system has <strong><code class="highlighter-rouge">iptables</code></strong> (Red Hat Enterprise Linux, CentOS, Fedora, and variants)</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sudo iptables -A INPUT -p tcp --dport 5222 -j ACCEPT

</code></pre></div>    </div>
  </li>
  <li>
    <p>If your system has <strong><code class="highlighter-rouge">ufw</code></strong> (Ubuntu, Debian, and variants)</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sudo ufw allow 5222/tcp
</code></pre></div>    </div>
  </li>
</ul>

<h2 id="deploying-with-a-cloud-service-provider">Deploying with a Cloud Service Provider</h2>
<p>All major cloud service providers support running docker containers. To create an on-demand instance of Mesibo in the cloud, refer to respective documentation on running Docker containers :</p>

<ul>
  <li>
    <p><a href="https://aws.amazon.com/getting-started/tutorials/deploy-docker-containers/">AWS</a></p>
  </li>
  <li>
    <p><a href="https://azure.microsoft.com/en-us/services/container-instances/">Azure</a></p>
  </li>
  <li>
    <p><a href="https://cloud.google.com/run/docs/deploying">Google Cloud</a></p>
  </li>
</ul>

<h2 id="group-management">Group Management</h2>
<p>Since, the complete database is hosted on your server, you need to provision all group configuration. Mesibo will create two tables <code class="highlighter-rouge">groups</code> and <code class="highlighter-rouge">members</code> in the database.</p>

<p>For example, you can add group to database like following:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mysql&gt; insert into groups set aid='Your APP ID', name='Your Group Name', expiry='2021-01-01 00:00:00';

</code></pre></div></div>

<p>You can then add groups members using <code class="highlighter-rouge">gid</code> in group table and <code class="highlighter-rouge">uid</code> from the users table.</p>

<h2 id="dynamically-loadable-modules-and-scripting">Dynamically Loadable Modules and Scripting</h2>
<p>Mesibo On-Premise is designed by developers for developers. Its dynamically loadable module architecture lets you load your own code for deeper integration with your infrastructure, enabling you for unlimited creative possibilities. This makes Mesibo, the most compelling real-time communication platform existing today.</p>

<p>We will soon publish a new tutorial on this topic.</p>

<h2 id="troubleshooting--faq">Troubleshooting &amp; FAQ</h2>

<p>For a more detailed FAQ section on On-Premise <a href="https://mesibo.com/documentation/faq/">refer</a></p>

<h3 id="i-am-currently-using-mesibo-cloud-services-if-i-enable-on-premise-how-long-will-it-take-to-switch-connection-to-my-server">I am currently using Mesibo Cloud services. If I enable On-Premise, how long will it take to switch connection to my server?</h3>
<p>As soon as you enable On-Premise in the console, your users will start getting connected to your On-Premise server. Please ensure that you have made the necessary configuration in the console and the <code class="highlighter-rouge">Running Status</code> in console displays your hostname before you enable On-Premise.</p>

<h3 id="can-i-switch-from-mesibo-on-premise-back-to-mesibo-cloud-service-">Can I switch from Mesibo On-Premise back to Mesibo Cloud Service ?</h3>
<p>Yes, if you would like your users to switch from On-Premise server to Mesibo cloud server, first disable On-Premise in the console and then stop your docker container which is running mesibo. Your users will now get connected to Mesibo Cloud.</p>

<h3 id="i-have-enabled-on-premise-and-my-server-is-running-how-do-i-know-if-my-app-is-connected-to-my-server">I have enabled On-Premise and my server is running, how do I know if my app is connected to my server?</h3>

<p>You can check the logs for your server using</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sudo docker logs CONTAINER ID 
</code></pre></div></div>
<p>When a user on your app logs-in, you’ll get a login entry for that user.</p>

<h3 id="what-happens-if-i-have-enabled-on-premise-and-my-server-is-not-running">What happens if I have enabled On-Premise and my server is not running?</h3>

<p>There are two possibilities:</p>

<ul>
  <li>
    <p>If <code class="highlighter-rouge">Auto Fallback</code> is not enabled and your server is not running and you have enabled On-Premise, your users will not be able to connect and hence will fail to get your service.</p>
  </li>
  <li>
    <p>If <code class="highlighter-rouge">Auto Fallback</code> is enabled and your server is not running and you have enabled On-Premise, your users will switch to Mesibo cloud after a few retries.</p>
  </li>
</ul>

<h3 id="what-happens-if-a-user-is-connected-to-my-server-and-i-disable-on-premise-from-the-console">What happens if a user is connected to my server and I disable On-Premise from the console?</h3>
<p>If your server is running, your users will continue to connect to your On-Premise server since they do not know about you disabling On-Premise server.</p>

<p>However, if you also stop your docker container running Mesibo, your users will be redirected to Mesibo cloud after a few retries and will connect there since you have disabled On-Premise.</p>

<h3 id="how-can-i-update-my-mesibo-on-premise-docker-image">How can I update my Mesibo On-Premise docker image?</h3>
<p>Always ensure that you have the latest version of Mesibo Docker Image running. To update your image run:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sudo docker pull mesibo/mesibo
</code></pre></div></div>

<h3 id="how-can-i-stop-the-docker-container-running-mesibo">How can I stop the docker container running Mesibo?</h3>
<p>Get the CONTAINER_ID of the Mesibo docker container by using</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sudo docker ps
</code></pre></div></div>

<p>Now, stop this container using CONTAINER_ID</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sudo docker stop &lt;CONTAINER_ID&gt;
</code></pre></div></div>

<h3 id="can-i-run-mesibo-on-a-cloud-service-provider">Can I run Mesibo on a Cloud Service Provider?</h3>
<p>All major cloud service providers support running docker containers. Please refer to respective documentation for different providers such as <a href="https://aws.amazon.com/getting-started/tutorials/deploy-docker-containers/">AWS</a>, <a href="https://azure.microsoft.com/en-us/services/container-instances/">Azure</a>, <a href="https://cloud.google.com/run/docs/deploying">Google Cloud</a>, etc.</p>

<h3 id="i-am-confused-between-on-premise-vs-cloud-offering-which-one-is-better">I am confused between On-Premise Vs. Cloud offering, which one is better?</h3>
<p>You can’t go wrong with either model. While our Cloud service let you start immediately without installing anything, the On-Premise model offers ultimate flexibility, control of your data, loadable modules, interface with machine learning and AI tools and much more. The pricing is same, however, On-Premise model can work out more cost-effective as there are no charges other than per active user charges. On another hand, you pay for bandwidth and storage charges in our cloud offering.</p>

<h3 id="getting-error-mysql-connection-failed---cant-connect-to-mysql-server-in-server-logs">Getting Error: MySQL Connection Failed - Can’t connect to MySQL server in server logs</h3>
<ol>
  <li>Ensure that database host, name and credentials are correctly configured in On-Premise configuration.</li>
  <li>Ensure that you have granted the necessary permissions to access your database from the docker container.</li>
  <li>Check your database host firewall configuration and ensure that, it is configured properly for allowing connections from docker container.</li>
</ol>

<h3 id="getting-error-unable-to-verify-app-token---network-error-in-server-logs">Getting Error: Unable to verify app token - network error in server logs</h3>
<p>Check your firewall configuration and verify that it is configured to allow connections from your docker container. Then, restart your docker container.</p>


							<!-- tags -->
							
							
							
							<span class="glyphicon glyphicon-tags" style="padding-right: 10px"></span><span style="vertical-align: 2px"><a href="/documentation/glossary/?term=open">open</a>, <a href="/documentation/glossary/?term=source">source</a>, <a href="/documentation/glossary/?term=on-premise">on-premise</a>, <a href="/documentation/glossary/?term=messaging">messaging</a>, <a href="/documentation/glossary/?term=chat">chat</a>, <a href="/documentation/glossary/?term=voice">voice</a>, <a href="/documentation/glossary/?term=video">video</a></span>
							
							<!-- link corrections -->
              <script language="JavaScript">
							var x = document.links.length;
							var baseHref = document.getElementsByTagName('base')[0].href
							for (i = 0; i < x; i++) {
							  var munged = false;
							  var thisHREF = document.links[i].href;
							  var originalURL = "/documentation/on-premise/";
							  if (thisHREF.indexOf(baseHref + "#") > -1) {
							    // hash fix
							    //console.log('BEFORE: base:',baseHref,'thisHREF:',thisHREF,'originalURL:',originalURL);
							    thisHREF = originalURL + thisHREF.replace(baseHref, "");
							    //console.log('AFTER: base:',baseHref,'thisHREF:',thisHREF,'originalURL:',originalURL);
							  }
							  if ((thisHREF.indexOf(window.location.hostname) > -1 || thisHREF.indexOf('http') == -1) && document.links[i].className.indexOf("nomunge") < 0) {
							    munged = true;
							    thisHREF = thisHREF.replace(".md", "/").replace("/index/", "/");
							    document.links[i].setAttribute('href', thisHREF);
							  }
							}
							</script>
							
							<!-- removed for mesibo -->
							
						</section>
					</main>
					<nav class="col-nav">
						<div id="sidebar-nav" class="sidebar hidden-sm hidden-xs">
						<div id="navbar" class="nav-sidebar">
    <ul class="nav" id="jsTOCLeftNav">
    </ul>
</div>

						</div>
					</nav>
					<div class="col-toc">
							<div class="sidebar hidden-xs hidden-sm">
							<div class="toc-nav">
								<div class="feedback-links">
									<ul>
										
										<li><a href="/documentation/support/"><i class="fa fa-question" aria-hidden="true"></i> Get support</a></li>
										<!-- toggle mode -->
										<li>
											<div class="toggle-mode">
												<div class="icon">
													<i class="fa fa-sun-o" aria-hidden="true"></i>
												</div>
												<div class="toggle-switch">
													<label class="switch">
														<input type="checkbox" id="switch-style">
														<div class="slider round"></div>
												</label>
												</div>
												<div class="icon">
													<i class="fa fa-moon-o" aria-hidden="true"></i>
												</div>
											</div>
										</li>
									</ul>
								</div>
								   
									<div id="side-toc-title">On this page:</div>
									
<ul id="my_toc" class="inline_toc">
  <li><a href="/documentation/on-premise/#why-on-premise" class="nomunge">Why On-Premise</a>
    <ul>
      <li><a href="/documentation/on-premise/#technical-advantages" class="nomunge">Technical Advantages</a></li>
      <li><a href="/documentation/on-premise/#pricing" class="nomunge">Pricing</a></li>
      <li><a href="/documentation/on-premise/#features" class="nomunge">Features</a></li>
      <li><a href="/documentation/on-premise/#prerequisites" class="nomunge">Prerequisites</a></li>
      <li><a href="/documentation/on-premise/#requirements" class="nomunge">Requirements</a></li>
      <li><a href="/documentation/on-premise/#should-i-recompile-my-apps-to-work-with-mesibo-on-premise" class="nomunge">Should I recompile my apps to work with Mesibo On-Premise?</a></li>
    </ul>
  </li>
  <li><a href="/documentation/on-premise/#setting-up-mesibo-on-premise" class="nomunge">Setting up Mesibo-On Premise</a>
    <ul>
      <li><a href="/documentation/on-premise/#step-1---install-docker" class="nomunge">Step 1 - Install Docker</a></li>
      <li><a href="/documentation/on-premise/#step-2---download-mesibo-on-premise-platform" class="nomunge">Step 2 - Download Mesibo On-Premise Platform</a></li>
      <li><a href="/documentation/on-premise/#step-3---configure-mesibo-on-premise" class="nomunge">Step 3 - Configure Mesibo On-Premise</a></li>
      <li><a href="/documentation/on-premise/#configuring-tls-certificate" class="nomunge">Configuring TLS Certificate</a></li>
      <li><a href="/documentation/on-premise/#step-4---run-mesibo" class="nomunge">Step 4 - Run Mesibo</a></li>
      <li><a href="/documentation/on-premise/#step-5---enable-on-premise" class="nomunge">Step 5 - Enable On-Premise</a></li>
      <li><a href="/documentation/on-premise/#firewall-settings" class="nomunge">Firewall Settings</a></li>
    </ul>
  </li>
  <li><a href="/documentation/on-premise/#deploying-with-a-cloud-service-provider" class="nomunge">Deploying with a Cloud Service Provider</a></li>
  <li><a href="/documentation/on-premise/#group-management" class="nomunge">Group Management</a></li>
  <li><a href="/documentation/on-premise/#dynamically-loadable-modules-and-scripting" class="nomunge">Dynamically Loadable Modules and Scripting</a></li>
  <li><a href="/documentation/on-premise/#troubleshooting--faq" class="nomunge">Troubleshooting &amp; FAQ</a>
    <ul>
      <li><a href="/documentation/on-premise/#i-am-currently-using-mesibo-cloud-services-if-i-enable-on-premise-how-long-will-it-take-to-switch-connection-to-my-server" class="nomunge">I am currently using Mesibo Cloud services. If I enable On-Premise, how long will it take to switch connection to my server?</a></li>
      <li><a href="/documentation/on-premise/#can-i-switch-from-mesibo-on-premise-back-to-mesibo-cloud-service-" class="nomunge">Can I switch from Mesibo On-Premise back to Mesibo Cloud Service ?</a></li>
      <li><a href="/documentation/on-premise/#i-have-enabled-on-premise-and-my-server-is-running-how-do-i-know-if-my-app-is-connected-to-my-server" class="nomunge">I have enabled On-Premise and my server is running, how do I know if my app is connected to my server?</a></li>
      <li><a href="/documentation/on-premise/#what-happens-if-i-have-enabled-on-premise-and-my-server-is-not-running" class="nomunge">What happens if I have enabled On-Premise and my server is not running?</a></li>
      <li><a href="/documentation/on-premise/#what-happens-if-a-user-is-connected-to-my-server-and-i-disable-on-premise-from-the-console" class="nomunge">What happens if a user is connected to my server and I disable On-Premise from the console?</a></li>
      <li><a href="/documentation/on-premise/#how-can-i-update-my-mesibo-on-premise-docker-image" class="nomunge">How can I update my Mesibo On-Premise docker image?</a></li>
      <li><a href="/documentation/on-premise/#how-can-i-stop-the-docker-container-running-mesibo" class="nomunge">How can I stop the docker container running Mesibo?</a></li>
      <li><a href="/documentation/on-premise/#can-i-run-mesibo-on-a-cloud-service-provider" class="nomunge">Can I run Mesibo on a Cloud Service Provider?</a></li>
      <li><a href="/documentation/on-premise/#i-am-confused-between-on-premise-vs-cloud-offering-which-one-is-better" class="nomunge">I am confused between On-Premise Vs. Cloud offering, which one is better?</a></li>
      <li><a href="/documentation/on-premise/#getting-error-mysql-connection-failed---cant-connect-to-mysql-server-in-server-logs" class="nomunge">Getting Error: MySQL Connection Failed - Can’t connect to MySQL server in server logs</a></li>
      <li><a href="/documentation/on-premise/#getting-error-unable-to-verify-app-token---network-error-in-server-logs" class="nomunge">Getting Error: Unable to verify app token - network error in server logs</a></li>
    </ul>
  </li>
</ul>


								</div>
								
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	
	<footer class="footer">
		  
    <div class="container">
        <div class="top_footer">
            <div class="row">
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><a href="https://mesibo.com/">Home</a></li>
                        <li><a href="https://mesibo.com/pricing/">Pricing</a></li>
                        <li><a href="https://mesibo.com/use-cases/">Use Cases</a></li>
                        <li><a href="https://mesibo.com/custom-solutions/">Custom Solutions</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><a href="https://mesibo.com/documentation/faq/">FAQ</a></li>
                        <li><a href="https://mesibo.com/help/">Support</a></li>
                        <li class="break"><a href="https://stackoverflow.com/questions/ask">Community</a></li>
                        <li><a href="https://mesibo.com/documentation/">Documentation</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><a href="https://mesibo.com/help/">Contact</a></li>
                        <li><a href="https://mesibo.com/career/">Careers</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-nav">
                <nav class="footer_sub_nav">
                    <ul class="menu">
                        <li><a href="https://mesibo.com/terms-of-use/#terms">Terms-of-Service</a></li>
                        <li><a href="https://mesibo.com/terms-of-use/#privacy">Privacy Policy</a></li>
                        <li><a href="https://mesibo.com/help/">Contact</a></li>
					 </ul>
                </nav>
            </div>
        </div>
        <div class="bottom_footer">
            <div class="footer-copyright col-xs-12 col-md-8">
                <p class="copyright">
                    Copyright &copy; 2019 Mesibo. All rights reserved. </p>
            </div>
            <div class="footer_social_nav">
                <ul class="nav-social">
                    <li class="fa fa-twitter"><a target="_blank" href="https://twitter.com/mesiboapi">Twitter</a></li>
                    <li class="fa fa-youtube"><a target="_blank" href="https://www.youtube.com/channel/UCxpcg-RSf2-lK4uyysWSsKQ">Youtube</a></li>
                    <li class="fa fa-google-plus"><a target="_blank" href="https://plus.google.com/b/107106343719610600541/107106343719610600541">Google</a></li>
                    <li class="fa fa-github"><a target="_blank" href="https://github.com/mesibo/samples">Github</a></li>
                    <li class="fa fa-linkedin"><a target="_blank" href="https://www.linkedin.com/company/mesibo">Linkedin</a></li>
                    <li class="fa fa-facebook"><a target="_blank" href="https://www.facebook.com/mesiboapi">Facebook</a></li>
                </ul>
            </div>
        </div>
    </div>

	</footer>
	<link rel="stylesheet" href="/css/github.css">
	
	<!-- <script src="/js/anchorlinks.js"></script> -->
	<script defer src="/js/menu.js"></script>
	<script src="/js/jquery.js"></script>
	<script src="/js/bootstrap.min.js"></script>
	<!-- Always include the archive.js, but it doesn't do much unless we are an archive -->
	<script language="javascript">
	// Default to assuming this is an archive and hiding some stuff
	// See js/archive.js and js/docs.js for logic relating to this
	var isArchive = true;
	var dockerVersion = 'v18.09';
	// In archives, we need to know the page root and we get it from JEKYLL_ENV in the jekyll build command
	var jekyllEnv = 'development';
	// If unset (in non-archive branches), defaults to "development". In that case, reset it to empty
	if (jekyllEnv == 'development') {
		jekyllEnv = '';
	}
	var pageURL = jekyllEnv + '/documentation/on-premise/';
	</script>
	<script src="/js/archive.js"></script>
	<script src="/js/stickyfill.min.js"></script>
	<script defer src="/js/metadata.js"></script>
	<script src="/js/glossary.js"></script>
	<script src="/js/collections_tocs.js"></script>
	<script defer src="/js/docs.js"></script>
	<script defer src="/js/toc.js"></script>
	<script language="javascript">
	jQuery(document).ready(function(){
				hookupTOCEvents();
			});
	</script>
</body>

</html>
