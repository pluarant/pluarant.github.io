var $S,$Sa="function"==typeof Object.defineProperties?Object.defineProperty:function(b,c,e){b!=Array.prototype&&b!=Object.prototype&&(b[c]=e.value)},$Sb="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function $Sc(b){if(b){for(var c=$Sb,e=["Array","prototype","copyWithin"],d=0;d<e.length-1;d++){var f=e[d];f in c||(c[f]={});c=c[f]}e=e[e.length-1];d=c[e];b=b(d);b!=d&&null!=b&&$Sa(c,e,{configurable:!0,writable:!0,value:b})}}
$Sc(function(b){return b?b:function(b,e,d){var c=this.length;b=Number(b);e=Number(e);d=Number(null!=d?d:c);if(b<e)for(d=Math.min(d,c);e<d;)e in this?this[b++]=this[e++]:(delete this[b++],e++);else for(d=Math.min(d,c+e-b),b+=d-e;d>e;)--d in this?this[--b]=this[d]:delete this[b];return this}});
function $Sd(b){if(null==b||"object"!=typeof b)return b;if(b instanceof Date){var c=new Date;c.setTime(b.getTime());return c}if(b instanceof Array){c=[];for(var e=0,d=b.length;e<d;e++)c[e]=$Sd(b[e]);return c}if(b instanceof Object){c={};for(e in b)b.hasOwnProperty(e)&&(c[e]=$Sd(b[e]));return c}throw Error("Unable to copy obj! type not supported.");}function $Se(b,c){return c in b&&"function"===typeof b[c]?!0:!1}
function $Sf(){this.g=-1;this.f=null;this.host="";this.port=0;this.url="";this.j=null;this.stopped=this.closed=this.m=0;this.i=10;this.l=60;this.b=this.i}function $Sg(b){if(NaN==this.o||void 0==this.o)this.o={};return this.o[b]}function $Sh(b){if(NaN==this.o||void 0==this.o)this.o={};this.o[b.f]=b}$S=$Sf.prototype;$S.start=function(){this.stopped=0;this.b=this.i;$Si(this)};$S.stop=function(){$Sj(this);this.stopped=1;this.disconnect()};
function $Sk(b,c){$Sj(b);b.g=setTimeout(function(){$Si(b)},c)}function $Sj(b){-1!=b.g&&clearInterval(b.g);b.g=-1}$S.send=function(b){this.f.send(b)};$S.C=function(b){null!=this.j&&this.j.C(b)};$S.B=function(){this.m=1;$Sj(this);this.b=this.i;null!=this.j&&this.j.B()};$S.A=function(){if(!this.closed){$Sj(this);this.closed=1;this.f=null;var b=1;null!=this.j&&(b=this.j.A());b&&!this.stopped&&(b=1E3*(5+this.b*Math.random()),this.b+=5,this.b>this.l&&(this.b=this.l),$Sk(this,b))}};
function $Si(b){if(!b.stopped)if($Sj(b),1===(null!=b.f?b.f.readyState:0))b.f.onopen=function(){$Sg(this).B()};else try{b.closed=0,b.m=0,null!=b.j&&$Sl(b.j,6,0),b.f=new WebSocket(b.url),$Sh(b),b.f.binaryType="arraybuffer",b.f.onopen=function(){$Sg(this).B()},b.f.onmessage=function(b){$Sg(this).C(b)},b.f.onclose=function(){$Sg(this).A()},b.f.onerror=function(){$Sg(this).A()}}catch(c){}}
$S.disconnect=function(){$Sj(this);null!=this.f&&(this.f.onclose=function(){},this.f.onerror=function(){},this.f.close(1E3),this.f=null)};ArrayBuffer.b||(ArrayBuffer.b=function(b,c){if(!(b instanceof ArrayBuffer))throw new TypeError("Source must be an instance of ArrayBuffer");if(c<=b.byteLength)return b.slice(0,c);b=new Uint8Array(b);c=new Uint8Array(new ArrayBuffer(c));c.set(b);return c.buffer});function $Sm(b,c){for(var e=0,d=0;4>d;d++)c[e++]=b&255,b>>>=8}
function $Sn(b,c,e,d){for(var f=0;f<c;f++)e[d++]=b[f+0]&255}function $So(b,c,e,d){for(var f=0;f<c;f++)e[d++]=b.charCodeAt(f+0)}function $Sp(){this.data=[]}$Sp.prototype.add=function(b){this.data.push(b)};$Sp.prototype.first=function(){return 0==this.data.length?null:this.data.shift()};function $Sq(b){this.mode=0==b?0:1;this.g=this.start=this.b=this.h=0;this.id=this.result=this.op=-1;this.items=null;this.buffer=new Uint8Array(32);0==this.mode&&(this.h=8)}
function $Sr(b,c){b.id=c;c=4;b.buffer[c++]=b.id&255;b.buffer[c++]=b.id>>8&255;b.buffer[c++]=b.id>>16&255;b.buffer[c++]=b.id>>24&255}function $Ss(b){var c=0;b.op=b.buffer[c++];b.result=b.buffer[c++];c++;c++;b.id=b.buffer[c]+256*b.buffer[c+1]+65536*b.buffer[c+2]+16777216*b.buffer[c+3];b.b=c+4}
function $St(b,c){var e=c+b.h;if(!(b.buffer.byteLength>e)){if(0<b.b&&(b.buffer.copyWithin(0,b.b,b.h-b.b),b.h-=b.b,b.b=0,e=c+b.h,b.buffer.byteLength>e))return;c=e-b.buffer.byteLength;64>c&&(c=64);c=new Uint8Array(b.buffer.byteLength+c);c.set(b.buffer);b.buffer=c}}function $Su(b){0==b.b&&$Ss(b);b.g=0;b.items=[];for(b.map={};$Sv(b)&&0==b.g;);return 1!=b.mode||0==b.g?null:b.items}
function $Sw(b,c,e,d,f){if(!(0!=b.mode||2047<c)){$St(b,d+8);$Sx==c&&(b.g=1);0<f&&e&&0<d&&(d=256>e?1:65536>e?2:16777216>e?3:4294967296>e?4:4294967296>e?5:1099511627776>e?6:281474976710656>e?7:8);var g=0;16777215<d?g=4:65535<d?g=3:255<d?g=2:0<d&&(g=1);var h=1,k=c&31,l=0;31<c||2<g?(h=2,k|=224):5>d?(g=0,l=d):l=g+4;b.buffer[b.h++]=k|l<<5;1<h&&(b.buffer[b.h++]=c>>5|g-1<<6);g&&$Sy(b,d,g);if(f)$Sy(b,e,d);else for(c=d,d=0;d<c;d++)b.buffer[b.h++]=e[d+0]&255}}
function $Sy(b,c,e){for(var d=0;d<e;d++)b.buffer[b.h++]=c&255,c>>>=8}function $Sz(b,c,e){for(var d=0;e--;)d<<=8,d+=b.buffer[c+e]&255;return d}function $SA(b,c,e,d){if("[object String]"===Object.prototype.toString.call(e)){for(var f=e.length,g=new Uint8Array(f),h=0;h<f;h++)g[h]=e.charCodeAt(h);e=g}else e=Uint8Array.from(e);if(0==d||void 0==d)d=e.byteLength;$Sw(b,c,e,d,0)}
function $Sv(b){var c={},e=b.buffer[b.b],d=e>>5,f=0;e&=31;var g=d,h=1;if($SB==e&&0<b.items.length)return b.g=1,!0;5==d||6==d?f=d-4:7==d&&(d=b.buffer[b.b+1],f=(d>>6)+1,e|=(d&63)<<5,h=2);if(b.h<b.b+h+f)return!1;c.type=e;f&&(g=$Sz(b,b.b+h,f));if(b.h<b.b+h+f+g)return!1;c.len=g;c.val=0;d=h+f+b.b;c.data=b.buffer.slice(d,d+g);4>=g&&(c.val=$Sz(b,b.b+h+f,g));b.items.push(c);b.map[e]=c;b.b+=h+f+g;b.b==b.h&&(b.g=1,b.h=0,b.b=0);return!0}var $SB=1,$Sx=2;
function $SC(b){if(!b.H)if(b.m)b.send(b.m);else{var c=b.G.first();if(null!=c){b.L=[];var e=new $Sq(0);c.id&&b.L.push(c.id);e.op=2;e.result=1;e.id=0;var d=parseInt(c.fid,10)&65535;$Sw(e,17,d,2,1);$Sw(e,$SB,0,0,1);d=parseInt(c.id,10)&4294967295;0<d&&$Sw(e,3,d,4,1);d=parseInt(c.channel,10);0<d&&$Sw(e,10,d,1,1);d=parseInt(c.type,10);0<d&&$Sw(e,11,d,1,1);d=parseInt(c.flag,10);0<d&&$Sw(e,9,d,4,1);c.hasOwnProperty("groupid")?(d=parseInt(c.groupid,10),0<d&&$Sw(e,6,d,4,1)):$SA(e,4,c.peer,0);d=parseInt(c.expiry,
10);d!=b.F&&$Sw(e,8,d,4,1);d=parseInt(c.refid,10)&4294967295;0<d&&$Sw(e,13,d,4,1);$SA(e,7,c.msg,0);b.m=e;b.send(b.m)}}}$S=Mesibo.prototype;$S.R=function(b,c,e){if(!b.hasOwnProperty("peer")&&!b.hasOwnProperty("groupid"))return!1;b=$Sd(b);b.msg=e;b.id=c;b.fid=this.O++;b.hasOwnProperty("expiry")||(b.expiry=this.F);b.hasOwnProperty("channel")||(b.channel=0);b.hasOwnProperty("type")||(b.type=0);b.hasOwnProperty("flag")||(b.flag=3);b.hasOwnProperty("refid")||(b.refid=0);this.G.add(b);$SC(this);return!0};
function Mesibo(){this.M=this.uid=0;this.I=this.token="";this.i=this.g=0;this.K=3E4;this.N=0;this.F=604800;this.stopped=this.s=0;this.f=new $Sf;this.u=-1;this.b=null;this.D={};this.v=null;this.w=-1;this.l=15E3;this.H=0;this.L=this.m=null;this.G=new $Sp;this.O=parseInt(Math.floor(65535*Math.random()),10);this.J=-1}function $Sl(b,c,e){null!=b.b&&$Se(b.b,"Mesibo_OnConnectionStatus")&&c!=b.J&&(b.J=c,b.b.Mesibo_OnConnectionStatus(c,e))}
$S.T=function(b){if(39>b.length)return!1;this.s=this.uid=0;this.token=b;return!0};$S.U=function(b){this.b=b};$S.S=function(b){this.I=b};$S.start=function(){this.stopped=0;var b=this.f;b.host="rtc.voicephp.com";b.port=5443;b.url="wss://rtc.voicephp.com:5443";this.f.j=this;this.f.start()};
$S.B=function(){this.i=0;this.P=parseInt(performance.now(),10);if(0==this.uid){for(var b=this.token,c=b.length,e=new Uint8Array(16),d=0;32>d;d+=2)e[d>>1]=parseInt(b.substr(d,2),16);this.cookie=e;e=32+parseInt(b[11],16)/2;d=b.substring(e,c);var f=15-parseInt(d[0],16);this.uid=$SD(d,1,f)^$SD(d,1+f,f);e+=1+2*f;d=b.substring(e,c);f=15-parseInt(d[0],16);d=b.substring(e+(1+2*f),c);this.M=parseInt(d,16)}0==this.uid?this.s=1:(b=new $Sq(0),b.op=1,b.result=1,b.id=1433999274,$Sw(b,3,this.M,4,1),$Sw(b,6,1,1,
1),this.send(b))};$S.A=function(){$SE(this);$SF(this);$Sl(this,2,0);return this.s||this.stopped?0:1};
$S.C=function(b){var c=new $Sq(1),e=b.data;b=b.data.byteLength;0==b&&(b=e.length);$St(c,b);c.buffer.set(new Uint8Array(e),c.h);c.h+=b;0==c.b&&$Ss(c);e=c.result;switch(e){case 65:for(this.g=c.id;;){b=$Su(c);if(null==b||0>=b.length)break;var d={},f=0,g=null;for(m in b){var h=b[m],k=h.val,l=h.data;h=parseInt(h.type,10);if($SB!=h){switch(h){case 3:d.id=k;break;case 13:d.refid=k;break;case 6:d.groupid=k;break;case 5:f=k;break;case 4:g="";for(k=0;k<0+l.byteLength;k++)g+=String.fromCharCode(parseInt(l[k],
10));d.peer=g;break;case 7:d.message=l;break;case 16:d.ts=k;break;case 9:d.flag=k;break;case 10:d.channel=k;break;case 11:d.type=k;break;case 12:d.status=k}0<f&&null!=g?this.v=this.D[f]=g:0<f?(this.D.hasOwnProperty(f)?(l=this.D[f],this.v=g):l=this.v,d.peer=l):d.peer=this.v}}d.origin=0;d.hasOwnProperty("status")?null!=this.b&&$Se(this.b,"Mesibo_OnMessageStatus")&&this.b.Mesibo_OnMessageStatus(d):!d.hasOwnProperty("message")||0!=(d.flag&16)||d.flag&512||null==this.b||!$Se(this.b,"Mesibo_OnMessage")||
this.b.Mesibo_OnMessage(d,d.message)}break;case 79:this.stopped=1;break;case 5:var n=c;$Su(n);$SG(this,this.uid,n.id,this.cookie,n.map[10].data,this.I);n=null;null!=n&&this.send(n);return}if(e&128&&($SF(this),e&192)){$Sl(this,4,0);this.i=0;this.s=1;this.f.stop();return}if(0==(e&64)){$SF(this);0==c.b&&$Ss(c);var m=c.op;if(1==m){if(0==e){this.l=5*(parseInt(performance.now(),10)-this.P);5E3>this.l?this.l=5E3:3E4<this.l&&(this.l=3E4);this.i=1;c=$Su(c);if(!(null==c||0>=c.length))for(n in c)if(e=c[n],m=
e.val,e=parseInt(e.type,10),$SB!=e)switch(e){case 5:this.K=1E3*m;break;case 11:this.N=m;break;case 13:this.F=m}$SH(this);$Sl(this,1,this.N)}}else 2==m&&(this.m=null);this.H=0;0<this.G.length&&$SC(this)}this.g&&$SH(this)};$S.send=function(b){this.i&&0<this.g&&($Sr(b,this.g),this.g=0);if(0!=b.mode)b=null;else{var c=0;b.buffer[c++]=b.op;b.buffer[c++]=b.result;var e=b.h-8;b.buffer[c++]=e&255;b.buffer[c++]=e>>8&255;$Sr(b,b.id);b=b.buffer.slice(0,b.h)}this.H=1;this.f.send(b);this.i&&$SH(this);$SI(this)};
function $SI(b){$SF(b);b.w=setTimeout(function(){b.f.disconnect()},b.l)}function $SF(b){-1!=b.w&&clearInterval(b.w);b.w=-1}window.performance=window.performance||{};performance.now=performance.now||performance.b||performance.g||performance.i||performance.webkitNow||Date.now;window.Mesibo=Mesibo;Mesibo.prototype.start=Mesibo.prototype.start;Mesibo.prototype.stop=Mesibo.prototype.stop;Mesibo.prototype.setListener=Mesibo.prototype.U;Mesibo.prototype.setAppName=Mesibo.prototype.S;
Mesibo.prototype.setCredentials=Mesibo.prototype.T;Mesibo.prototype.sendMessage=Mesibo.prototype.R;function $SD(b,c,e){b=b.substring(c,c+e);return parseInt(b,16)}
function $SG(b,c,e,d,f,g){var h=new Uint8Array(4+d.byteLength+f.byteLength+g.length);$Sm(c,h);$Sn(f,f.byteLength,h,4);$Sn(d,d.byteLength,h,4+f.byteLength);$So(g,g.length,h,4+d.byteLength+f.byteLength);crypto.subtle.digest("SHA-256",h).then(function(c){c=new Uint8Array(c);var d=new $Sq(0);d.op=1;d.result=1;d.id=e;$SA(d,11,c,c.byteLength);b.send(d)})}function $SH(b){0!=b.i&&(b.g&&$SJ(b),$SE(b),b.u=setTimeout(function(){$SJ(b)},b.K))}function $SE(b){-1!=b.u&&clearInterval(b.u);b.u=-1}
function $SJ(b){if(0!=b.i){var c=new $Sq(0),e=b.g;c.op=16;c.result=0;c.id=e;b.g=0;b.send(c)}};
